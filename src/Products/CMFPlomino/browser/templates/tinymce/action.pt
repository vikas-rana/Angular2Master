<!DOCTYPE html>
<html id="region-content"
	lang="en"
	i18n:domain="plomino.tinymce">
	<head>
		<meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
		<title i18n:translate="plominoaction_title">Add/edit a Plomino Action</title>
		<link tal:replace="structure provider:plone.htmlhead.links" />
		<link rel="stylesheet" type="text/css" href="++resource++Products.CMFPlomino/css/plomino.tinymce.css" />
       <script tal:replace="structure provider:plone.scripts" />
        <script>
            // get select two working
           require(['jquery', 'pat-registry','mockup-patterns-select2'],
             function($, registry) {
               $(document).ready(function (){
                 registry.scan($('body'));
               });
           });
        </script>
	</head>
	<body id="plonebrowser" tal:define="form python:view.context;
		actionid view/request/actionid|nothing;
		adapted form/tinyform|nothing;
		actionProperties adapted/getActionProperties;
		action adapted/getAction;
		actions adapted/getActions;
		dummy python: action is not None and view.request.RESPONSE.redirect(action.absolute_url() + '/edit?ajax_load=1&ajax_include_head=1');
		">
		<div class="plone-modal-dialog">
			<div class="plone-modal-content">
				<div class="plone-modal-header">
					<a class="plone-modal-close">Ã—</a>
					<h2 class="plone-modal-title">Insert a Plomino Action</h2>
				</div>
				<div class="plone-modal-body">
					<fieldset>
                        <legend>Add a new action</legend>
                        <a tal:attributes="href string: ../++add++PlominoAction?ajax_load=1&ajax_include_head=1&form.widgets.IBasic.title=${actionid}">New action</a>
                    </fieldset>
                    <br />
                    <fieldset>
                        <legend i18n:translate="plominoaction_selection">Select an existing Plomino Action</legend>

                        <form id="actionSelection" method="get" tal:attributes="action python: form.absolute_url() + '/tinyform/addAction'">
                            <p>
                               <label for="plominoActionId" i18n:translate="plominoaction_id">Action ID</label>
                                <select id="plominoActionId" name="actionid">
                                    <option
                                        tal:repeat="item actions"
                                        tal:content="string: ${item/id} : ${item/Title}"
                                        tal:attributes="value item/id; selected python:item.id==actionid"></option>
                                </select>
                            </p>
                            <div class="pattern-modal-buttons">
                                <input type="submit" id="insert" class="context" name="insert" value="Insert" i18n:attributes="value;" />
                                <input type="button" id="cancel" class="standalone" name="cancel" value="Cancel" i18n:attributes="value;" onclick="top.tinymce.activeEditor.windowManager.close();" />
                            </div>
                        </form>
                    </fieldset>
				</div>
				<div class="plone-modal-footer">
				</div>
			</div>
		</div>
	</body>
</html>
