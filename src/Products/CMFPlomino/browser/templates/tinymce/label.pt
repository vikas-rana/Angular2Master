<!DOCTYPE html>
<html id="region-content"
    lang="en"
    i18n:domain="plomino.tinymce">
    <head>
        <meta http-equiv="Content-type" content="text/html;charset=UTF-8" /> 
        <title i18n:translate="plominolabel_title">Insert/edit a Plomino Label</title>
        <link tal:replace="structure provider:plone.htmlhead.links" />
        <script tal:replace="structure provider:plone.scripts" />
    </head>
    <body id="plonebrowser" tal:define="form python:view.context;
          labelr python: view.request.get('labelid', ':').split(':', 1);
          labelid python: labelr[0];
          labeltext python: len(labelr) > 1 and labelr[1].strip() or '';
          enablecustomlabel python: labeltext and True or False;
          fields python:form.getFormFields();
        ">
        <div class="plone-modal-dialog">
            <div class="plone-modal-content">
                <div class="plone-modal-header">
                    <h2 class="plone-modal-title">Insert/edit a Plomino Label</h2>
                </div>
                <div class="plone-modal-body">
                    <!-- Form which adds the label -->
                    <form method="post" tal:attributes="action python: form.absolute_url() + '/tinyform/addLabel'">            
                        <fieldset>
                            <p>By default a label will use the <em>Title</em> of the associated field when inserted into the form. Select the field that this label should be associated with:</p>
                            <p>
                                <input type="hidden" name="type" value="label" />
                            
                                <label for="plominoLabelId" i18n:translate="plominolabel_selection">Field</label>
                                <select id="plominoLabelId" name="labelid">
                                    <option
                                        tal:repeat="item fields"
                                        tal:content="string: ${item/Title} (${item/id})"
                                        tal:attributes="value item/id; selected python:item.id==labelid"></option>
                                </select>
                            </p>
                            <p>
                                If you would like to use something other than the Title of the field, you may choose to enable custom label text. This will allow you to enter anything as the value of the label.
                            </p>
                            <p>
                                <input type="checkbox" id="plominoLabelEnableCustom" name="enablecustomlabel" tal:attributes="checked enablecustomlabel" />
                                <label for="plominoLabelEnableCustom">Enable Custom Label</label>
                            </p>
                        </fieldset>
                        <div class="pattern-modal-buttons">
                            <input type="submit" id="insert" class="context" name="insert" value="Insert" i18n:attributes="value;" />
                            <input type="button" id="cancel" class="standalone" name="cancel" value="Cancel" i18n:attributes="value;" onclick="top.tinymce.activeEditor.windowManager.close();" />
                        </div>
                    </form>
                    <div class="plone-modal-footer">
                    </div>
                </div>
            </div>
        </div>
                    
    </body>
</html>